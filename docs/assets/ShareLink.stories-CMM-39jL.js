import{j as r}from"./jsx-runtime-fBYdV91l.js";import{V as y}from"./index-B1TV06f5.js";import{r as u}from"./iframe-CTYXmkIP.js";import{u as S}from"./chunk-EPOLDU6W-B6iDpUT7.js";import{u as g,E as b,a as f}from"./constants-CO5QU0OY.js";import{u as v}from"./useSnackBar-BFhCNiUn.js";import{B as x,a as B}from"./Button-DjNutbWK.js";import{T as C}from"./TextInput-ufGPSlcG.js";import{f as L}from"./full-duplicate-BZV8LNX-.js";import{P as j,c as A}from"./testUtils-D9iweGnN.js";import{c as E}from"./index-CMLNM0uR.js";import{u as I}from"./useAppDispatch-DXLbf86N.js";import{u as T}from"./useMediaQuery-KDjWxQJX.js";import{e as w,f as D}from"./store-DbzJj_LB.js";import{a as N}from"./SnackBar-D6Hukfun.js";import"./preload-helper-PPVm8Dsz.js";import"./Tooltip-YtCRjN_n.js";import"./SvgIcon-jeh_DQK7.js";import"./stroke-pass-CALgybTM.js";import"./FieldFooter-DCOhvS3-.js";import"./full-error-BFAmjN4t.js";import"./index.module-B6k_9nOM.js";import"./FieldHeader-DbcAayaw.js";import"./date-CrU56jqV.js";import"./full-clear-Q4kCtSRL.js";import"./full-close-5Oxr7nnd.js";import"./full-validate-CbMNulkZ.js";function O(e){const s=u.useRef(!1);return u.useCallback(()=>{s.current||(s.current=!0,e&&e())},[e])}const p={"share-link":"_share-link_ss7zf_1","share-link-input":"_share-link-input_ss7zf_7","share-link-button":"_share-link-button_ss7zf_15"},c=({link:e,label:s,notifySuccessMessage:i,offerId:l})=>{const a=u.useRef(null),t=v(),{logEvent:n}=g(),h=S(),m=O(()=>{n(b.CLICKED_COPY_TEMPLATE_OFFER_LINK,{from:h.pathname,offerId:l})}),_=async()=>{try{await navigator.clipboard.writeText(e),t.success(i),m()}catch{a.current&&(a.current.select(),document.execCommand("copy"),t.success(i),m())}};return r.jsxs("div",{className:p["share-link"],children:[r.jsx("div",{className:p["share-link-input"],children:r.jsx(C,{name:"share-link",label:s,value:e,ref:a})}),r.jsx("div",{className:p["share-link-button"],children:r.jsx(x,{onClick:_,variant:B.PRIMARY,icon:L,label:"Copier"})})]})};try{c.displayName="ShareLink",c.__docgenInfo={description:"",displayName:"ShareLink",props:{link:{defaultValue:null,description:"",name:"link",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},notifySuccessMessage:{defaultValue:null,description:"",name:"notifySuccessMessage",required:!0,type:{name:"string"}},offerId:{defaultValue:null,description:"",name:"offerId",required:!0,type:{name:"number"}}}}}catch{}const R=w.getSelectors(e=>e.snackBar.list),P=e=>e.snackBar.isStickyBarOpen,V=e=>R.selectAll(e),k={"snack-bar-container":"_snack-bar-container_1xbo7_1","with-sticky-action-bar":"_with-sticky-action-bar_1xbo7_13"},d=()=>{const e=f(V),s=I(),i=f(P),l=T("(max-width: 38.125rem)"),a=e.sort((t,n)=>(l?1:-1)*(new Date(t.createdAt).getTime()-new Date(n.createdAt).getTime()));return r.jsx("div",{className:E(k["snack-bar-container"],i&&k["with-sticky-action-bar"]),children:a.map((t,n)=>r.jsx(N,{variant:t.variant,description:t.description,onClose:()=>s(D(t.id)),testId:`global-snack-bar-${t.variant}-${n}`},t.id))})};try{d.displayName="SnackBarContainer",d.__docgenInfo={description:`The SnackBarContainer component is used to display snackbars of different types.
It supports displaying snackbars such as errors and success

---
**Important: Use \`list\` selector to get the snackbars to be displayed.**
---`,displayName:"SnackBarContainer",props:{}}}catch{}const de={title:"@/ui-kit/ShareLink",decorators:[y],component:c},o={render:e=>r.jsxs(j,{store:A({}),children:[r.jsx("div",{style:{width:"100%"},children:r.jsx(c,{...e})}),r.jsx(d,{})]}),args:{link:"https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ",label:"Lien de l’offre",notifySuccessMessage:"Le lien ADAGE a bien été copié"}};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  render: args => <Provider store={configureTestStore({})}>
      <div style={{
      width: '100%'
    }}>
        <ShareLink {...args} />
      </div>
      <SnackBarContainer />
    </Provider>,
  args: {
    link: 'https://bv.ac-versailles.fr/adage/passculture/offres/offerid/8 ',
    label: 'Lien de l’offre',
    notifySuccessMessage: 'Le lien ADAGE a bien été copié'
  }
}`,...o.parameters?.docs?.source}}};const me=["Default"];export{o as Default,me as __namedExportsOrder,de as default};
