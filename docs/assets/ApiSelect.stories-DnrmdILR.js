import{j as w}from"./jsx-runtime-0r2nTPIS.js";import{r as a}from"./iframe-DlYLE1J1.js";import{c as V}from"./index.module-ubM7OgmK.js";import{S as M}from"./SelectAutocomplete-yODmV9Hk.js";import"./preload-helper-PPVm8Dsz.js";import"./index-5eldUqfX.js";import"./full-error-BFAmjN4t.js";import"./noop-BjFrJKj1.js";import"./SvgIcon-Couf_zSm.js";import"./full-down-Cmbtr9nI.js";const O=400,n=a.forwardRef(({name:l,label:s,disabled:h=!1,className:b,description:g,error:y,required:_=!0,minSearchLength:c=3,onSelect:S,onSearch:v,searchApi:m,value:d},A)=>{const[q,u]=a.useState([]),o=a.useRef(null),p=a.useRef(new Map),f=a.useCallback(async e=>{if(e.trim().length<c){u([]);return}try{const t=await m(e);p.current=new Map(t.map(r=>[r.value,r])),u(t.map(({value:r,label:k})=>({value:r,label:k})))}catch{p.current=new Map,u([])}},[c,m]),E=V(e=>{f(e),v?.(e)},O);return a.useEffect(()=>{f(d??o.current?.value??"")},[]),a.useImperativeHandle(A,()=>o.current),w.jsx(M,{name:l,label:s,options:q,description:g,onSearch:e=>{E(e)},onChange:e=>{const t=p.current.get(e.target.value);S(t)},disabled:h,className:b,ref:o,error:y,required:_,value:d})});n.displayName="ApiSelect";try{n.displayName="ApiSelect",n.__docgenInfo={description:"",displayName:"ApiSelect",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string | Element"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"string"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string"}},required:{defaultValue:{value:"true"},description:"",name:"required",required:!1,type:{name:"boolean"}},minSearchLength:{defaultValue:{value:"3"},description:"",name:"minSearchLength",required:!1,type:{name:"number"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(option: ApiOption | undefined) => void"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!1,type:{name:"((searchText: string) => void)"}},searchApi:{defaultValue:null,description:"",name:"searchApi",required:!0,type:{name:"(searchText: string) => Promise<ApiOption[]>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}}}}}catch{}const F={title:"@/ui-kit/forms/ApiSelect",component:n},U=async l=>(await new Promise(s=>setTimeout(s,500)),[{value:"1",label:"Mimie Mathy",thumbUrl:"https://fr.wikipedia.org/wiki/Mimie_Mathy#/media/Fichier:Mimie_Mathy_Cannes.jpg"},{value:"2",label:"Daft Punk",thumbUrl:"https://upload.wikimedia.org/wikipedia/commons/8/83/Daft_Punk_in_2013_2.jpg"},{value:"3",label:"Justice",thumbUrl:"https://fr.wikipedia.org/wiki/Justice_(groupe)#/media/Fichier:Justice_(band).jpg"},{value:"4",label:"Odezenne",thumbUrl:""},{value:"5",label:"Omaks",thumbUrl:""},{value:"6",label:"Téléphone",thumbUrl:""},{value:"7",label:"The Beatles",thumbUrl:""}]),i={args:{name:"artist-select",label:"ApiSelect :",description:"Essayez The Beatles ou Daft Punk",searchApi:U,minSearchLength:1}};i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:`{
  args: {
    name: "artist-select",
    label: "ApiSelect :",
    description: "Essayez The Beatles ou Daft Punk",
    searchApi: searchApi,
    minSearchLength: 1
  }
}`,...i.parameters?.docs?.source}}};const I=["Default"];export{i as Default,I as __namedExportsOrder,F as default};
